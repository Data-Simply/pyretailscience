[tox]
env_list = py310, py311, py312, py313
isolated_build = true
skip_missing_interpreters = true

[testenv]
# Install test dependencies with locked versions to match main environment
deps =
    duckdb==1.0.0
    pytest>=8.0.0,<9
    pytest-cov>=4.1.0,<5
    pytest-mock>=3.14.0,<4
    freezegun>=1.5.1,<2
commands =
    # Basic import test
    python -c "import pyretailscience; print('Import successful for {envname}')"

    # Run unit tests (excluding integration tests)
    pytest tests/ --ignore=tests/integration -v --tb=short --maxfail=5 --cov=pyretailscience

setenv =
    PY_COLORS = 1

# Enable parallel output for all environments
[testenv:py{310,311,312,313}]
parallel_show_output = true
